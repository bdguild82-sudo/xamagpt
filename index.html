<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Habibi Market</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}
body{background:radial-gradient(circle at top,#2a0a4a,#0b0614);color:#f5f3ff;min-height:100vh;overflow:hidden}

/* ===== HEADER ===== */
header{
 display:flex;justify-content:space-between;align-items:center;
 padding:24px 48px;background:rgba(11,6,20,.9);
 backdrop-filter:blur(10px)
}

.logo{
 font-size:28px;font-weight:700;color:#b983ff;
 position:relative;overflow:hidden
}
.logo::after{
 content:"";position:absolute;top:0;left:-120%;
 width:120%;height:100%;
 background:linear-gradient(120deg,transparent 40%,rgba(255,255,255,.8) 50%,transparent 60%);
 transform:skewX(-20deg);
 animation:slash 3.5s infinite;
}
@keyframes slash{
 0%,40%{left:-120%}
 60%,100%{left:120%}
}

nav{display:flex;align-items:center;gap:20px}
nav img{width:26px;cursor:pointer;display:none}
nav a{color:#ddd;text-decoration:none;cursor:pointer}
nav a:hover{color:#b983ff}

/* ===== MARKET ===== */
.container{padding:40px 48px}
.market{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:28px}
.card{background:linear-gradient(180deg,#2a164f,#160a2b);border-radius:18px;padding:18px}
.image-box{height:150px;border-radius:14px;overflow:hidden;margin-bottom:14px}
.image-box img{width:100%;height:100%;object-fit:cover}
.prices{display:flex;gap:10px}
.btn{flex:1;padding:10px;border-radius:10px;border:none;font-weight:600;cursor:pointer}
.robux{background:#b983ff;color:#14001f}

/* ===== MODALS ===== */
.auth{
 position:fixed;inset:0;background:rgba(0,0,0,.7);
 display:none;align-items:center;justify-content:center;z-index:50
}
.auth-box{
 background:linear-gradient(180deg,#2a164f,#160a2b);
 padding:20px;border-radius:16px;width:380px
}
.auth-box input{width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:none}
.auth-box button{width:100%;padding:10px;border-radius:8px;border:none;background:#b983ff;font-weight:600}

/* ===== INBOX ===== */
.inbox{
 display:flex;height:400px
}
.users{
 width:120px;border-right:1px solid rgba(255,255,255,.1);
 overflow-y:auto
}
.users div{
 padding:10px;font-size:13px;cursor:pointer;opacity:.7
}
.users div.active,.users div:hover{opacity:1;color:#b983ff}
.chat{
 flex:1;display:flex;flex-direction:column
}
.chatBox{
 flex:1;background:#12081f;border-radius:10px;
 padding:10px;margin-bottom:10px;font-size:13px;overflow-y:auto
}
.msg{margin-bottom:6px}
.me{color:#b983ff}
.them{color:#9fffb1}

footer{text-align:center;padding:30px;opacity:.5}
</style>
</head>

<body>

<header>
 <div class="logo">Habibi Market</div>
 <nav>
  <img id="inboxBtn"
   src="https://cdn4.iconfinder.com/data/icons/roundome-communication-line/32/message_call_mail_communication_Inbox-512.png"
   onclick="openInbox()">
  <a onclick="openAuth()" id="authBtn">Login</a>
 </nav>
</header>

<div class="container">
 <div class="market" id="market"></div>
</div>

<footer>Habibi Market Â© 2026</footer>

<!-- AUTH -->
<div class="auth" id="auth">
 <div class="auth-box">
  <input id="user" placeholder="Username">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="login()">Continue</button>
 </div>
</div>

<!-- INBOX -->
<div class="auth" id="inbox">
 <div class="auth-box" style="width:600px">
  <h3>ðŸ“¥ Inbox</h3>
  <div class="inbox">
   <div class="users" id="userList"></div>
   <div class="chat">
    <div class="chatBox" id="chatBox"></div>
    <input id="msgInput" placeholder="Type a message...">
    <button onclick="sendMsg()">Send</button>
   </div>
  </div>
  <div style="text-align:center;opacity:.6;font-size:12px;cursor:pointer"
       onclick="inbox.style.display='none'">Close</div>
 </div>
</div>

<script>
const XAMA="Xama";
const inboxBtn=document.getElementById("inboxBtn");
const btn=document.getElementById("authBtn");
let currentChatUser=null;

if(localStorage.getItem("currentUser")){
 btn.textContent="Logout";
 inboxBtn.style.display="block";
}

function openAuth(){
 if(localStorage.getItem("currentUser")){
  localStorage.removeItem("currentUser");
  location.reload();
 } else auth.style.display="flex";
}

function login(){
 localStorage.setItem("currentUser",user.value);
 auth.style.display="none";
 inboxBtn.style.display="block";
 btn.textContent="Logout";
}

const items=[{
 name:"Money Money Puggy",
 img:"https://tse3.mm.bing.net/th/id/OIP.aIWdrv89WltqgJZ3oYvFSwHaHa",
 robux:"950 R$"
}];

items.forEach(i=>{
 market.innerHTML+=`
 <div class="card">
  <div class="image-box"><img src="${i.img}"></div>
  <button class="btn robux">Buy ${i.robux}</button>
 </div>`;
});

/* ===== INBOX SYSTEM ===== */
function openInbox(){
 inbox.style.display="flex";
 loadUsers();
}

function loadUsers(){
 const me=localStorage.getItem("currentUser");
 userList.innerHTML="";
 Object.keys(localStorage).forEach(k=>{
  if(k.startsWith("chat_")){
   const u=k.replace("chat_","");
   if(me===XAMA || u===me){
    const d=document.createElement("div");
    d.textContent=u;
    d.onclick=()=>openChat(u);
    userList.appendChild(d);
   }
  }
 });
}

function openChat(u){
 currentChatUser=u;
 loadChat();
}

function loadChat(){
 const me=localStorage.getItem("currentUser");
 const key=me===XAMA?"chat_"+currentChatUser:"chat_"+me;
 const msgs=JSON.parse(localStorage.getItem(key)||"[]");
 chatBox.innerHTML="";
 msgs.forEach(m=>{
  chatBox.innerHTML+=`
   <div class="msg ${m.from===me?"me":"them"}">
    <b>${m.from}:</b> ${m.text}
   </div>`;
 });
}

function sendMsg(){
 const me=localStorage.getItem("currentUser");
 if(!msgInput.value)return;

 const key=me===XAMA?"chat_"+currentChatUser:"chat_"+me;
 const msgs=JSON.parse(localStorage.getItem(key)||"[]");
 msgs.push({from:me,text:msgInput.value});
 localStorage.setItem(key,JSON.stringify(msgs));
 msgInput.value="";
 loadChat();
}
</script>

</body>
</html>
